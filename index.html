<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Palavras-Chave</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .controls label {
            margin-right: 5px;
        }
        
        .controls input {
            width: 60px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .results {
            margin-top: 30px;
        }
        
        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .keyword {
            background-color: #e1f5fe;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .keyword .count {
            background-color: #4fc3f7;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .word-cloud {
            margin-top: 30px;
            text-align: center;
            min-height: 300px;
            border: 1px dashed #ddd;
            padding: 20px;
            border-radius: 8px;
        }
        
        .word-cloud span {
            display: inline-block;
            margin: 5px;
            transition: all 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Extrator de Palavras-Chave</h1>
        
        <textarea id="textInput" placeholder="Digite ou cole seu texto aqui..."></textarea>
        
        <div class="controls">
            <button id="extractBtn">Extrair Palavras-Chave</button>
            <label for="maxWords">Máx. palavras:</label>
            <input type="number" id="maxWords" value="20" min="5" max="50">
            <label for="minLength">Tamanho mínimo:</label>
            <input type="number" id="minLength" value="3" min="2" max="10">
        </div>
        
        <div class="results">
            <h3>Palavras-chave encontradas:</h3>
            <div id="keywordsList" class="keywords"></div>
            
            <h3>Nuvem de Palavras:</h3>
            <div id="wordCloud" class="word-cloud"></div>
        </div>
    </div>

    <script>
        document.getElementById('extractBtn').addEventListener('click', extractKeywords);
        
        function extractKeywords() {
            const text = document.getElementById('textInput').value;
            const maxWords = parseInt(document.getElementById('maxWords').value);
            const minLength = parseInt(document.getElementById('minLength').value);
            
            if (!text.trim()) {
                alert('Por favor, insira algum texto para análise.');
                return;
            }
            
            // Processa o texto
            const words = processText(text, minLength);
            const keywords = getTopKeywords(words, maxWords);
            
            // Exibe os resultados
            displayKeywords(keywords);
            displayWordCloud(keywords);
        }
        
        function processText(text, minLength) {
            // Remove pontuação e converte para minúsculas
            const cleanedText = text.toLowerCase()
                .replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, '')
                .replace(/\s{2,}/g, ' ');
            
            // Lista de palavras comuns para ignorar (stop words)
            const stopWords = new Set([
                'a', 'o', 'e', 'é', 'de', 'do', 'da', 'das', 'dos', 'em', 'no', 'na', 'nas', 'nos',
                'para', 'por', 'com', 'como', 'que', 'se', 'ao', 'à', 'às', 'um', 'uma', 'uns', 'umas',
                'ou', 'mas', 'meu', 'minha', 'teu', 'tua', 'seu', 'sua', 'nós', 'vos', 'deles', 'delas',
                'isto', 'isso', 'aquilo', 'este', 'esta', 'esse', 'essa', 'aquele', 'aquela', 'outro',
                'outra', 'qual', 'quais', 'quando', 'onde', 'como', 'porque', 'porquê', 'quem', 'cujo',
                'cuja', 'cujos', 'cujas', 'quanto', 'quantos', 'quanta', 'quantas', 'tão', 'tanto', 'tal',
                'tais', 'todo', 'todos', 'toda', 'todas', 'algum', 'alguns', 'alguma', 'algumas', 'nenhum',
                'nenhuns', 'nenhuma', 'nenhumas', 'cada', 'muito', 'pouco', 'muitos', 'poucos', 'muita',
                'pouca', 'muitas', 'poucas', 'quê', 'já', 'agora', 'antes', 'depois', 'hoje', 'amanhã',
                'ontem', 'sempre', 'nunca', 'tarde', 'cedo', 'logo', 'aqui', 'ali', 'acolá', 'lá', 'longe',
                'perto', 'dentro', 'fora', 'sim', 'não', 'também', 'ainda', 'já', 'só', 'apenas', 'até', 'sem',
                'sob', 'sobre', 'entre', 'atrás', 'desde', 'durante', 'exceto', 'através', 'além', 'antes',
                'depois', 'contra', 'abaixo', 'acima', 'debaixo', 'em cima', 'até', 'desde', 'enquanto',
                'quando', 'onde', 'porque', 'como', 'se', 'embora', 'mesmo', 'talvez', 'assim', 'então',
                'portanto', 'logo', 'pois', 'porquanto', 'porquê', 'por isso', 'por este', 'por estes',
                'por esta', 'por estas', 'por aquele', 'por aqueles', 'por aquela', 'por aquelas', 'por qual',
                'por quais', 'por quem', 'por cujo', 'por cuja', 'por cujos', 'por cujas', 'por quanto',
                'por quantos', 'por quanta', 'por quantas', 'por tudo', 'por todos', 'por toda', 'por todas',
                'por algo', 'por alguns', 'por alguma', 'por algumas', 'por nada', 'por ninguém', 'por cada',
                'por muito', 'por pouco', 'por muitos', 'por poucos', 'por muita', 'por pouca', 'por muitas',
                'por poucas', 'por quê', 'por já', 'por agora', 'por antes', 'por depois', 'por hoje',
                'por amanhã', 'por ontem', 'por sempre', 'por nunca', 'por tarde', 'por cedo', 'por logo',
                'por aqui', 'por ali', 'por acolá', 'por lá', 'por longe', 'por perto', 'por dentro',
                'por fora', 'por sim', 'por não', 'por também', 'por ainda', 'por já', 'por só', 'por apenas',
                'por até', 'por sem', 'por sob', 'por sobre', 'por entre', 'por atrás', 'por desde',
                'por durante', 'por exceto', 'por através', 'por além', 'por antes', 'por depois', 'por contra',
                'por abaixo', 'por acima', 'por debaixo', 'por em cima', 'por até', 'por desde', 'por enquanto',
                'por quando', 'por onde', 'por porque', 'por como', 'por se', 'por embora', 'por mesmo',
                'por talvez', 'por assim', 'por então', 'por portanto', 'por logo', 'por pois', 'porquanto',
                'porquê', 'por por isso', 'por por este', 'por por estes', 'por por esta', 'por por estas',
                'por por aquele', 'por por aqueles', 'por por aquela', 'por por aquelas', 'por por qual',
                'por por quais', 'por por quem', 'por por cujo', 'por por cuja', 'por por cujos', 'por por cujas',
                'por por quanto', 'por por quantos', 'por por quanta', 'por por quantas', 'por por tudo',
                'por por todos', 'por por toda', 'por por todas', 'por por algo', 'por por alguns',
                'por por alguma', 'por por algumas', 'por por nada', 'por por ninguém', 'por por cada',
                'por por muito', 'por por pouco', 'por por muitos', 'por por poucos', 'por por muita',
                'por por pouca', 'por por muitas', 'por por poucas', 'por por quê', 'por por já',
                'por por agora', 'por por antes', 'por por depois', 'por por hoje', 'por por amanhã',
                'por por ontem', 'por por sempre', 'por por nunca', 'por por tarde', 'por por cedo',
                'por por logo', 'por por aqui', 'por por ali', 'por por acolá', 'por por lá', 'por por longe',
                'por por perto', 'por por dentro', 'por por fora', 'por por sim', 'por por não',
                'por por também', 'por por ainda', 'por por já', 'por por só', 'por por apenas', 'por por até',
                'por por sem', 'por por sob', 'por por sobre', 'por por entre', 'por por atrás', 'por por desde',
                'por por durante', 'por por exceto', 'por por através', 'por por além', 'por por antes',
                'por por depois', 'por por contra', 'por por abaixo', 'por por acima', 'por por debaixo',
                'por por em cima'
            ]);
            
            // Divide o texto em palavras e filtra
            return cleanedText.split(/\s+/)
                .filter(word => word.length >= minLength && !stopWords.has(word));
        }
        
        function getTopKeywords(words, maxWords) {
            const wordCount = {};
            
            // Conta a frequência de cada palavra
            words.forEach(word => {
                wordCount[word] = (wordCount[word] || 0) + 1;
            });
            
            // Converte para array e ordena por frequência
            const sortedWords = Object.entries(wordCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, maxWords);
            
            return sortedWords;
        }
        
        function displayKeywords(keywords) {
            const container = document.getElementById('keywordsList');
            container.innerHTML = '';
            
            keywords.forEach(([word, count]) => {
                const element = document.createElement('div');
                element.className = 'keyword';
                element.innerHTML = `${word} <span class="count">${count}</span>`;
                container.appendChild(element);
            });
        }
        
        function displayWordCloud(keywords) {
            const container = document.getElementById('wordCloud');
            container.innerHTML = '';
            
            if (keywords.length === 0) return;
            
            // Encontra os valores máximo e mínimo de contagem
            const maxCount = keywords[0][1];
            const minCount = keywords[keywords.length - 1][1];
            
            keywords.forEach(([word, count]) => {
                const element = document.createElement('span');
                
                // Calcula o tamanho da fonte baseado na frequência (entre 12px e 36px)
                const fontSize = 12 + (count - minCount) / (maxCount - minCount) * 24;
                const fontWeight = Math.min(700, 400 + (count / maxCount) * 300);
                
                element.textContent = word;
                element.style.fontSize = `${fontSize}px`;
                element.style.fontWeight = fontWeight;
                element.style.opacity = 0.7 + (count / maxCount) * 0.3;
                
                // Posição aleatória para efeito de nuvem
                element.style.transform = `rotate(${Math.random() * 30 - 15}deg)`;
                
                container.appendChild(element);
            });
        }
    </script>
</body>
</html>
